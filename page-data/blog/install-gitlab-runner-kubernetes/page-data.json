{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/install-gitlab-runner-kubernetes","result":{"data":{"markdownRemark":{"html":"<p>Using <a href=\"https://en.wikipedia.org/wiki/Continuous_integration\">CI/CD Systems</a> to quickly build and deploy software has become the norm in professional software development and open source. Teams that use CI/CD Systems can build, test, and deploy every commit from their codebase. Along with CI/CD Systems, automated deployment and orchestration tools, like <a href=\"https://kubernetes.io/\">Kubernetes</a>, have taken over data-centers with fully containerized workloads. A automated pipeline to build, test, and deploy your code is realizable by integrating a CI/CD System with Kubernetes. Building this system is easy with <a href=\"https://docs.gitlab.com/ee/ci/\">Gitlab's CI/CD Runner</a> and <a href=\"https://cloud.google.com/kubernetes-engine\">Google Kubernetes Engine (GKE)</a>. In this tutorial, I will demonstrate how to set up Gitlab's CI/CD System and launch it on a Kubernetes cluster — for releases that are 100% automated.</p>\n<p><strong>Note:</strong> When setting up the runner for myself, I wanted complete control over the resources deployed on my cluster. To reflect this, this guide exhibits how to manually install the Runner on Kubernetes without using Helm, like the <a href=\"https://docs.gitlab.com/runner/install/kubernetes.html\">official guide</a>. The final result is functionally equivalent but without the extra tooling. </p>\n<h2>Register a Runner</h2>\n<p>The first step to deploying a Gitlab Runner on Kubernetes is to obtain a registration token from Gitlab. This token is necessary because it create a new authentication token that connects the Runner to Gitlab. </p>\n<p>First, we need to request a new registration token from Gitlab. Head to your online Gitlab repository and go to <strong>Settings > CI/CD > Runners</strong>. Then, find the section titled: Set up a specific Runner manually. This page hosts the details we need to register a new Runner with Gitlab. The registration token we are looking for will be automatically generated under the third item in the list. </p>\n<p>Next, we need to go through the registration process to connect a new Runner. We will use the registration details we obtained from Gitlab to complete this step. The easiest way to register a Runner is to start a <a href=\"https://docs.docker.com/engine/docker-overview/\">Docker</a> container locally with the Runner. Don't worry about keeping this container in perfect condition because we will discard it after the registration process. Our goal is to start a terminal within the container to perform the registration process. Using Docker, we can start a terminal with this command.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -it --entrypoint /bin/bash gitlab/gitlab-runner:latest</code></pre></div>\n<p>Next, we can register the Runner with this command. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ gitlab-runner register</code></pre></div>\n<p>Here is where we take the registration information we got from the Gitlab repository and use it to register a new Runner. Using the provided information, complete the form as follows. Replace <strong>[REGISTRATION TOKEN]</strong> with your registration token.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\nhttps://gitlab.com/\n\nPlease enter the gitlab-ci token for this runner:\n[REGISTRATION TOKEN]\n\nPlease enter the gitlab-ci description for this runner:\n[RUNNER-ID]: My first Gitlab runner!       \n\nPlease enter the gitlab-ci tags for this runner (comma separated):\ntutorial\n\nWhether to lock the Runner to current project [true/false]:\n[true]: false\n\nRegistering runner... succeeded                     runner=[RUNNER ID]\n\nPlease enter the executor: shell, ssh, docker+machine, docker-ssh+machine, kubernetes, docker, docker-ssh, parallels, virtualbox:\ndocker\n\nPlease enter the default Docker image (e.g. ruby:2.1):\nbusybox:latest\n\nRunner registered successfully. Feel free to start it, but if it&#39;s running already the config should be automatically reloaded! </code></pre></div>\n<p>Don't worry about the executor details or the default image for the Docker executor. Later, we will use a Kubernetes executor along with a different configuration when we ultimately deploy the Runner.\n\nTo check if the registration was successful, return to your browser, and refresh the page. Under the registration information will be the new Runner. This Runner <strong>should be disconnected with an error.</strong></p>\n<p>The final step is to extract the authentication token from the local Runner. When we registered the Runner, Gitlab saved an authentication token in the docker container. Before launching the runner to Kubernetes, we need to get this authentication token.</p>\n<p>This token is necessary because it connects your Runner to Gitlab and designates a stable ID for your Runner. When Pods are restarted automatically by Kubernetes, a stable ID allows Gitlab to reference the same logical Runner after each restart.</p>\n<p>To find the authentication token, we need to open the generated configuration file from the registration process. In the terminal, run this command to view the configuration.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ vim /etc/gitlab-runner/config.toml\n\nconcurrent = 1\ncheck_interval = 0\n\n[[runners]]\n  name = &quot;temp runner&quot;\n  url = &quot;https://gitlab.com/&quot;\n  token = [TOKEN]\n  executor = &quot;docker&quot;\n  [runners.docker]\n    tls_verify = false\n    image = &quot;busybox:latest&quot;\n    privileged = false\n    disable_cache = false\n    volumes = [&quot;/cache&quot;]\n    shm_size = 0\n  [runners.cache]</code></pre></div>\n<p>Above is the configuration that Gitlab created when we registered the runner. I redacted my token for security purposes and renamed it to <strong>[TOKEN]</strong>. Copy this token and make sure not to lose it, as it is the only way to authenticate the newly registered Runner to Gitlab. Once properly stored, it is safe to shutdown and remove the Docker instance.</p>\n<h2>Deploy the Runner to Kubernetes</h2>\n<p>After we have an authentication token, we can start work on deploying the Runner to Kubernetes. I'm running the cluster for this tutorial on <a href=\"https://cloud.google.com/kubernetes-engine\">GKE</a>, but this will work with any Kubernetes cluster hosted by the other major cloud providers (<a href=\"https://aws.amazon.com/eks/\">AWS EKS</a>, <a href=\"https://azure.microsoft.com/en-us/services/kubernetes-service/\">Azure AKS</a>, or <a href=\"https://www.ibm.com/cloud/container-service/\">IBM Kubernetes Service</a>).</p>\n<p>Before we add the Runner to the cluster, we must create a few resources on the Kubernetes cluster. The first is a <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\">Namespace</a> for the Runner and its Pods. The Namespace separates the Runner from other applications to aid with future upgrades and maintenance. The second is a <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/rbac/\">ServiceAccount, Role, and RoleBinding</a> to give the Runner the privileges to add new Pods to the Namespace.  </p>\n<p>First, declare a new Namespace called gitlab-runner.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create namespace gitlab-runner</code></pre></div>\n<p>After we create the new Namespace, we add the authentication roles to the Kubernetes cluster for the Runner. Below are the ServiceAccount, Role, and RoleBinding for the Runner. Copy this configuration into a file called <code class=\"language-text\">gitlab-runner-service-account.yaml</code>, and deploy it with <code class=\"language-text\">kubectl</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># gitlab-runner-service-account.yaml</span>\n\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RoleBinding\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl apply -f gitlab-runner-service-account.yaml</code></pre></div>\n<p>This ServiceAccount gives the runner access to create, modify, and view other Pods in the cluster. Use with caution. For organizations that are concerned about the access the Runner will have, it is common to use a separate cluster for CI/CD related business. An independent cluster will reduce the attack surface of your cluster with minimal incurred cloud costs.</p>\n<p>Once the ServiceAccount, Role, and RoleBinding are deployed to the cluster, a ConfigMap is needed to hold the Runner's configuration. The Runner's <a href=\"https://cloud.google.com/kubernetes-engine/docs/concepts/configmap\">ConfigMap</a> is very similar to the Runner configuration that Gitlab created for the authentication token but with some Kubernetes specific changes. Take the authentication token that was created in the last section, and add it the ConfigMap in the section with <strong>[TOKEN]</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># gitlab-runner-config.yaml</span>\n\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">-</span>config\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">config.toml</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token punctuation\">-</span>\n    concurrent = 4\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>runners<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n      name = \"Kubernetes Demo Runner\"\n      url = \"https<span class=\"token punctuation\">:</span>//gitlab.com/ci\"\n      token = \"<span class=\"token punctuation\">[</span>TOKEN<span class=\"token punctuation\">]</span>\"\n      executor = \"kubernetes\"\n      <span class=\"token punctuation\">[</span>runners.kubernetes<span class=\"token punctuation\">]</span>\n        namespace = \"gitlab<span class=\"token punctuation\">-</span>runner\"\n        poll_timeout = 600\n        cpu_request = \"1\"\n        service_cpu_request = \"200m\"</code></pre></div>\n<p>Add this ConfigMap to the Kubernetes cluster.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl apply -f gitlab-runner-config.yaml</code></pre></div>\n<p>This configuration is slightly different from the one that was generated by Gitlab when we registered the Runner. Note that the executor is Kubernetes executor, not a Docker executor like before. A Kubernetes executor runs each pipeline stage in a new Pod. By running a new Pod for each stage, the testing and build environments are fresh for each pipeline. Additionally, this allows the Runner to scale by delegating Kubernetes to manage all of the running Pods. The Runner doesn't have to manage a bunch of Docker containers and is only concerned with collecting the results from each run.</p>\n<p>The final thing to create is a <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\">Deployment</a> for the Runner. This Deployment is very straightforward because the Kubernetes executor on the Runner handles packaging each pipeline into a new Pod. Since autoscaling is handled on the executor level, Pod autoscaling is not needed for the Runner. To connect the new Runner to Gitlab, we need to integrate the ConfigMap we created above. By attaching the ConfigMap as a volume to the Pod, the Runner can safely be restarted and updated while maintaining the same configuration. Add the Deployment to the Kubernetes cluster.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># gitlab-runner-deployment.yaml</span>\n\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>admin\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> run\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> gitlab/gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">:</span>latest\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> Always\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"100m\"</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"100m\"</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/gitlab<span class=\"token punctuation\">-</span>runner/config.toml\n              <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n              <span class=\"token key atrule\">subPath</span><span class=\"token punctuation\">:</span> config.toml\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n          <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">-</span>config\n      <span class=\"token key atrule\">restartPolicy</span><span class=\"token punctuation\">:</span> Always</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl apply -f gitlab-runner-deployment.yaml</code></pre></div>\n<p>To check if the runner connected to Gitlab, head back to your browser, and refresh your repository's settings. The Runner will have a green dot next to its name to identify that the it has connected to Gitlab. Often, there is a delay of a minute or two for the runner to connect (this happened to me).</p>\n<p>Now that the Runner is connected, you can run CI/CD pipelines from your repository. The Runner can do things like build GO binaries and deploy websites to S3. Although the Runner can do a lot, it has one major limitation: its inability to build Docker containers. In the next section, I will walk you through enabling Docker builds on the Runner.\n</p>\n<h2>Enable Docker Builds</h2>\n<p>To enable the Runner to build Docker containers, we must give the Runner access to the local Docker daemon. Normally, Docker and Kubernetes block access to the local Docker daemon because of the security implications. For a Runner to access the daemon, it will need to run in <a href=\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\">privileged mode</a> to get this access. As a warning, running containers in privileged mode with other production containers is not recommended. To use privileged mode in the safest way possible, <a href=\"https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/\">security professionals recommend isolating CI/CD resources in another cluster</a>.</p>\n<p>To enable building Docker containers directly inside the CI/CD pipeline, we need to update the ConfigMap to allow access to the local Docker daemon and run the Pods in privileged mode. Change the ConfigMap to reflect the changes as such.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># gitlab-runner-config.yaml</span>\n\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">-</span>config\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> gitlab<span class=\"token punctuation\">-</span>runner\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">config.toml</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token punctuation\">-</span>\n    concurrent = 4\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>runners<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n      name = \"Kubernetes Runner\"\n      url = \"https<span class=\"token punctuation\">:</span>//gitlab.com/ci\"\n      token = \"<span class=\"token punctuation\">[</span>TOKEN<span class=\"token punctuation\">]</span>\"\n      executor = \"kubernetes\"\n      <span class=\"token punctuation\">[</span>runners.kubernetes<span class=\"token punctuation\">]</span>\n        namespace = \"gitlab<span class=\"token punctuation\">-</span>runner\"\n        privileged = true\n        poll_timeout = 600\n        cpu_request = \"1\"\n        service_cpu_request = \"200m\"\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>runners.kubernetes.volumes.host_path<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n            name = \"docker\"\n            mount_path = \"/var/run/docker.sock\"\n            host_path = \"/var/run/docker.sock\"</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl apply -f gitlab-runner-config.yaml</code></pre></div>\n<p>After the ConfigMap is updated, restart the Runner Pod; it will update with the new ConfigMap. Once completed, we can enable the <code class=\"language-text\">docker:dind</code> service in the CI/CD pipeline and build docker containers from directly within the CI/CD pipelines. This opens up the possibility of fully automated Kubernetes deployments. Now, you can build and deploy the containers produced by the Runner directly to the Kubernetes cluster.</p>\n<h2>Conclusion</h2>\n<p>We can see that setting up Gitlab's CI/CD Runner on Kubernetes isn't very difficult to do. With a registration token from Gitlab, we can easily authorize a new Runner. Next, a simple ConfigMap and Deployment are used to launch the Runner to the Kubernetes cluster. By using a Kubernetes executer on the Runner, pipelines can be auto-scaled across the cluster as demand for your Runner increases. Although the base Runner is powerful, connecting the Docker daemon to the Runner allows it to build Docker containers. Once the Runner is up and running, we can execute CI/CD pipelines and deploy the builds on a Kubernetes cluster — all 100% automated.</p>","frontmatter":{"formattedDate":"Jul 19, 2020","date":"2020-07-19T05:20:54+0000","postDate":"2019-02-01T21:57:00-0500","slug":"/blog/install-gitlab-runner-kubernetes","title":"How to Install GitLab Runner on Kubernetes","description":"Learn how to install Gitlab CI/CD Runner on Kubernetes and grant access to the Docker Daemon to build containers.","image":"post-1-cover.jpeg","author":"Adam Comer"}},"file":null},"pageContext":{"slug":"/blog/install-gitlab-runner-kubernetes","image":"post-1-cover.jpeg"}},"staticQueryHashes":[]}